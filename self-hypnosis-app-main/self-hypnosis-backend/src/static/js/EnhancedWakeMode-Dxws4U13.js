var X=Object.defineProperty,Z=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var A=(a,c,r)=>c in a?X(a,c,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[c]=r,f=(a,c)=>{for(var r in c||(c={}))ee.call(c,r)&&A(a,r,c[r]);if(W)for(var r of W(c))te.call(c,r)&&A(a,r,c[r]);return a},w=(a,c)=>Z(a,P(c));var v=(a,c,r)=>new Promise((x,b)=>{var h=l=>{try{n(r.next(l))}catch(g){b(g)}},y=l=>{try{n(r.throw(l))}catch(g){b(g)}},n=l=>l.done?x(l.value):Promise.resolve(l.value).then(h,y);n((r=r.apply(a,c)).next())});import{j as e,B as k}from"../assets/index-BKYWQTDL.js";import{r as p,B as E,H as se,E as ae,c as ne,d as ie,a as re}from"./ui-vendor-BlhBEYGa.js";import{C as M,a as I,b as F,B as T,d as O,c as L}from"./badge-D77RBqCt.js";import{P as oe}from"./progress-B8H4JCGg.js";import{a as N,m as $,T as ce,b as le,c as de,d as he}from"./api-DWFtRO9k.js";import q from"./FearPatternForm-BoCZ1HbK.js";import Y from"./SomaticExperiencing-Bp0xLbYE.js";import z from"./PolyvagalExercises-D157M2cx.js";import J from"./IFSJournaling-CQFCTMvx.js";import me from"./MediaPipeMonitor-BOn8V-ks.js";import"./react-vendor-DusaJeda.js";import"./therapeutic-content-J_xzvB3G.js";import"./performance-utils-CCFKMyI6.js";import"./index-58yVllA0.js";import"./index-P2oMkgOm.js";import"./index-B0WkjEv8.js";import"./index-BZ3-ktAF.js";function De({userProfile:a,updateProfile:c,addSessionToHistory:r}){const[x,b]=p.useState("fear_analysis"),[h,y]=p.useState({}),[n,l]=p.useState([]),[g,C]=p.useState([]),[m,_]=p.useState([]),[i,o]=p.useState(!0),[d,j]=p.useState(null),[G,D]=p.useState(!0);p.useEffect(()=>{B()},[]);const B=()=>v(null,null,function*(){try{o(!0),j(null);let s;try{const t=yield N.getTherapeuticContent({content_type:"exercise,meditation"});s=t.content||t}catch(t){console.warn("API unavailable, using mock data:",t),s=$.therapeuticContent.filter(u=>["exercise","meditation"].includes(u.content_type))}if(l(s),a!=null&&a.id)try{const[t,u]=yield Promise.all([N.getCBTExercises(a.id),N.getCartesianReflections(a.id)]);C(t.exercises||[]),_(u.reflections||[])}catch(t){console.warn("Failed to load user exercises:",t)}}catch(s){console.error("Error loading therapeutic data:",s),j("Failed to load therapeutic content"),l($.therapeuticContent.filter(t=>["exercise","meditation"].includes(t.content_type)))}finally{o(!1)}}),S=(s,t)=>v(null,null,function*(){try{y(u=>w(f({},u),{[s]:w(f({},t),{completedAt:new Date().toISOString()})}));try{yield N.createSession({user_id:(a==null?void 0:a.id)||1,session_type:"wake_mode",module_used:s,duration_minutes:t.duration||10,completion_status:"completed"})}catch(u){console.warn("Failed to log session:",u)}r==null||r({type:"wake_mode",module:s,duration:t.duration||10,completed:!0,timestamp:new Date().toISOString(),data:t}),s==="fear_analysis"&&t.fearPatterns&&(c==null||c({fearPatterns:t.fearPatterns,lastAnalysisDate:new Date().toISOString()}))}catch(u){console.error("Error handling module completion:",u)}}),H=s=>v(null,null,function*(){try{D(!1);try{yield N.createSafetyAlert({user_id:(a==null?void 0:a.id)||1,alert_type:s.type,severity_level:s.severity,details:s.details})}catch(t){console.warn("Failed to log safety alert:",t)}alert(`Safety Alert: ${s.message}

Please take a moment to ground yourself. The session has been paused for your wellbeing.`),setTimeout(()=>D(!0),3e4)}catch(t){console.error("Error handling safety alert:",t)}}),K=s=>v(null,null,function*(){try{const t=yield N.saveCBTExercise(f({user_id:(a==null?void 0:a.id)||1},s));return C(u=>[...u,t.exercise||s]),t}catch(t){throw console.error("Error saving CBT exercise:",t),t}}),U=s=>v(null,null,function*(){try{const t=yield N.saveCartesianReflection(f({user_id:(a==null?void 0:a.id)||1},s));return _(u=>[...u,t.reflection||s]),t}catch(t){throw console.error("Error saving Cartesian reflection:",t),t}}),R=[{id:"fear_analysis",name:"Fear Pattern Analysis",description:"Identify and analyze your fear patterns using Chase Hughes' methodology",icon:e.jsx(E,{className:"h-5 w-5"}),difficulty:2,duration:"15-20 min",component:q},{id:"somatic",name:"Somatic Experiencing",description:"Body-based healing and nervous system regulation",icon:e.jsx(se,{className:"h-5 w-5"}),difficulty:2,duration:"10-15 min",component:Y},{id:"polyvagal",name:"Polyvagal Exercises",description:"Nervous system safety and social connection activation",icon:e.jsx(ae,{className:"h-5 w-5"}),difficulty:2,duration:"10-15 min",component:z},{id:"ifs",name:"IFS Journaling",description:"Internal Family Systems parts work and integration",icon:e.jsx(ne,{className:"h-5 w-5"}),difficulty:3,duration:"20-30 min",component:J},{id:"cbt",name:"CBT Thought Records",description:"Cognitive Behavioral Therapy for authority-related thoughts",icon:e.jsx(ie,{className:"h-5 w-5"}),difficulty:3,duration:"15-25 min",component:Q},{id:"cartesian",name:"Cartesian Reflection",description:"Philosophical inquiry using Descartes' method of doubt",icon:e.jsx(re,{className:"h-5 w-5"}),difficulty:4,duration:"20-30 min",component:V}];return i?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-4 text-blue-600 animate-pulse"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Loading Wake Mode..."}),e.jsx("p",{className:"text-gray-600",children:"Preparing your therapeutic modules"})]})}):d?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-4 text-red-600"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Wake Mode"}),e.jsx("p",{className:"text-red-600 mb-4",children:d}),e.jsx(k,{onClick:B,variant:"outline",children:"Retry Loading Content"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-4 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Wake Mode"}),e.jsx("p",{className:"text-gray-600",children:"Conscious behavioral rewiring through interactive therapeutic modules"})]}),G&&e.jsx(me,{onAlert:H,isActive:!0,sensitivity:"medium"}),e.jsxs(ce,{value:x,onValueChange:b,className:"w-full",children:[e.jsx(le,{className:"grid w-full grid-cols-3 lg:grid-cols-6",children:R.map(s=>e.jsxs(de,{value:s.id,className:"text-xs",children:[s.icon,e.jsx("span",{className:"hidden sm:inline ml-1",children:s.name.split(" ")[0]})]},s.id))}),R.map(s=>e.jsx(he,{value:s.id,className:"space-y-4",children:e.jsxs(M,{children:[e.jsxs(I,{children:[e.jsxs(F,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.icon,s.name]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",children:s.duration}),e.jsxs(T,{variant:s.difficulty<=2?"default":s.difficulty===3?"secondary":"destructive",children:["Level ",s.difficulty]})]})]}),e.jsx(O,{children:s.description})]}),e.jsxs(L,{children:[s.id==="fear_analysis"&&e.jsx(q,{userProfile:a,onComplete:t=>S("fear_analysis",t)}),s.id==="somatic"&&e.jsx(Y,{userProfile:a,onComplete:t=>S("somatic",t),therapeuticContent:n.filter(t=>t.category==="somatic")}),s.id==="polyvagal"&&e.jsx(z,{userProfile:a,onComplete:t=>S("polyvagal",t),therapeuticContent:n.filter(t=>t.category==="polyvagal")}),s.id==="ifs"&&e.jsx(J,{userProfile:a,onComplete:t=>S("ifs",t)}),s.id==="cbt"&&e.jsx(Q,{userProfile:a,onComplete:t=>S("cbt",t),onSave:K,exercises:g,therapeuticContent:n.filter(t=>t.category==="cbt")}),s.id==="cartesian"&&e.jsx(V,{userProfile:a,onComplete:t=>S("cartesian",t),onSave:U,reflections:m,therapeuticContent:n.filter(t=>t.category==="cartesian")})]})]})},s.id))]}),Object.keys(h).length>0&&e.jsxs(M,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"Session Progress"}),e.jsx(O,{children:"Your progress in this wake mode session"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"space-y-2",children:Object.entries(h).map(([s,t])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"capitalize",children:s.replace("_"," ")}),e.jsx(T,{variant:"default",children:"Completed"})]},s))}),e.jsx(oe,{value:Object.keys(h).length/R.length*100,className:"mt-4"})]})]})]})}function Q({userProfile:a,onComplete:c,onSave:r,exercises:x,therapeuticContent:b}){const[h,y]=p.useState(null),[n,l]=p.useState({}),g=b.find(i=>i.title.includes("Thought Record"))||{title:"Authority Figure Thought Record",content:"This exercise helps you identify and challenge negative thought patterns about authority figures..."},C=()=>{y({id:Date.now(),type:"thought_record",title:g.title,startTime:new Date().toISOString()}),l({})},m=(i,o)=>{l(d=>w(f({},d),{[i]:o}))},_=()=>v(null,null,function*(){if(!h)return;const i=w(f({},h),{responses:n,completedAt:new Date().toISOString(),duration:Math.round((new Date-new Date(h.startTime))/6e4)});try{yield r(i),c(i),y(null),l({})}catch(o){console.error("Error completing CBT exercise:",o)}});return h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Step-by-Step Thought Record"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Work through each step to identify and challenge negative thought patterns."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"1. Describe the situation with an authority figure:"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg",rows:3,value:n.situation||"",onChange:i=>m("situation",i.target.value),placeholder:"What happened? Who was involved? When and where?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"2. What emotions did you feel? (Rate 1-10)"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["Anxiety","Fear","Anger","Shame"].map(i=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm mb-1",children:[i,":"]}),e.jsx("input",{type:"range",min:"1",max:"10",value:n[i.toLowerCase()]||1,onChange:o=>m(i.toLowerCase(),o.target.value),className:"w-full"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[n[i.toLowerCase()]||1,"/10"]})]},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"3. What thoughts went through your mind?"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg",rows:3,value:n.thoughts||"",onChange:i=>m("thoughts",i.target.value),placeholder:"What were you thinking? What did you tell yourself?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"4. What evidence supports these thoughts?"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg",rows:2,value:n.supporting_evidence||"",onChange:i=>m("supporting_evidence",i.target.value),placeholder:"What facts support this thought?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"5. What evidence contradicts these thoughts?"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg",rows:2,value:n.contradicting_evidence||"",onChange:i=>m("contradicting_evidence",i.target.value),placeholder:"What facts contradict this thought?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"6. More balanced thoughts:"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg",rows:3,value:n.balanced_thoughts||"",onChange:i=>m("balanced_thoughts",i.target.value),placeholder:"What would be a more balanced, realistic way to think about this?"})]}),e.jsx(k,{onClick:_,className:"w-full",disabled:!n.situation||!n.thoughts,children:"Complete Exercise"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"prose max-w-none",children:e.jsxs("p",{children:[g.content.substring(0,200),"..."]})}),e.jsx(k,{onClick:C,className:"w-full",children:"Start CBT Thought Record"}),x.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Previous Exercises (",x.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["You have completed ",x.length," CBT exercises."]})]})]})}function V({userProfile:a,onComplete:c,onSave:r,reflections:x,therapeuticContent:b}){const[h,y]=p.useState(null),[n,l]=p.useState({}),g=b.find(o=>o.title.includes("Cartesian"))||{title:"Cartesian Doubt: Questioning Authority",content:"This philosophical exercise uses Descartes' method of systematic doubt to examine your beliefs about authority..."},C=()=>{y({id:Date.now(),type:"authority_doubt",title:g.title,startTime:new Date().toISOString()}),l({})},m=(o,d)=>{l(j=>w(f({},j),{[o]:d}))},_=()=>v(null,null,function*(){if(!h)return;const o=w(f({},h),{responses:n,completedAt:new Date().toISOString(),duration:Math.round((new Date-new Date(h.startTime))/6e4)});try{yield r(o),c(o),y(null),l({})}catch(d){console.error("Error completing Cartesian reflection:",d)}});if(!h)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"prose max-w-none",children:e.jsxs("p",{children:[g.content.substring(0,200),"..."]})}),e.jsx(k,{onClick:C,className:"w-full",children:"Start Cartesian Reflection"}),x.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-medium mb-2",children:["Previous Reflections (",x.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["You have completed ",x.length," philosophical reflections."]})]})]});const i=["Authority figures are always right","I must always obey authority","Authority figures are superior to me","Questioning authority is dangerous","I am less valuable than those in power"];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Cartesian Method of Doubt"}),e.jsx("p",{className:"text-sm text-gray-600",children:`"I think, therefore I am" - Let's examine your beliefs about authority through systematic doubt.`})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"1. Examine these beliefs about authority:"}),e.jsx("div",{className:"space-y-2",children:i.map((o,d)=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("p",{className:"mb-2",children:['"',o,'"']}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`belief_${d}`,value:"can_doubt",checked:n[`belief_${d}`]==="can_doubt",onChange:j=>m(`belief_${d}`,j.target.value),className:"mr-2"}),"Can doubt this"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`belief_${d}`,value:"cannot_doubt",checked:n[`belief_${d}`]==="cannot_doubt",onChange:j=>m(`belief_${d}`,j.target.value),className:"mr-2"}),"Cannot doubt this"]})]})]},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"2. What remains certain after doubting these beliefs?"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg",rows:4,value:n.certainties||"",onChange:o=>m("certainties",o.target.value),placeholder:"What can you be absolutely certain of about yourself and your relationship to authority?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"3. From these certainties, how might you relate to authority differently?"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg",rows:4,value:n.new_relationship||"",onChange:o=>m("new_relationship",o.target.value),placeholder:"Based on what you're certain of, how could your relationship with authority change?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-2",children:"4. Final insight from this reflection:"}),e.jsx("textarea",{className:"w-full p-3 border rounded-lg",rows:3,value:n.final_insight||"",onChange:o=>m("final_insight",o.target.value),placeholder:"What is your key insight from this philosophical inquiry?"})]}),e.jsx(k,{onClick:_,className:"w-full",disabled:!n.certainties||!n.new_relationship,children:"Complete Reflection"})]})]})}export{De as default};
