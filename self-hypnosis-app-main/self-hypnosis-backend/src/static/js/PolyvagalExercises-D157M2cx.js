import{j as e,B as i}from"../assets/index-BKYWQTDL.js";import{r as h,H as F,Z as M,i as B,P as b,l as G,m as z}from"./ui-vendor-BlhBEYGa.js";import{C as p,a as g,b as y,d as f,c as j,B as v}from"./badge-D77RBqCt.js";import{P as H}from"./progress-B8H4JCGg.js";import{N as n}from"./therapeutic-content-J_xzvB3G.js";import"./react-vendor-DusaJeda.js";import"./performance-utils-CCFKMyI6.js";import"./index-58yVllA0.js";function J({userProfile:w,addSessionToHistory:A,updateProfile:C}){const[s,N]=h.useState(null),[m,u]=h.useState(!1),[c,x]=h.useState(0),[l,S]=h.useState(w.currentNervousSystemState||n.VENTRAL_VAGAL),d={[n.VENTRAL_VAGAL]:{name:"Ventral Vagal",description:"Safe & Social - Calm, connected, and engaged",color:"text-green-600",icon:B,characteristics:["Calm","Connected","Curious","Compassionate"]},[n.SYMPATHETIC]:{name:"Sympathetic",description:"Fight/Flight - Mobilized and alert",color:"text-yellow-600",icon:M,characteristics:["Alert","Energized","Anxious","Reactive"]},[n.DORSAL_VAGAL]:{name:"Dorsal Vagal",description:"Freeze/Shutdown - Withdrawn and collapsed",color:"text-red-600",icon:F,characteristics:["Withdrawn","Numb","Disconnected","Exhausted"]}},E=[{id:"vagal_toning",name:"Vagal Toning",description:"Humming and vocal exercises to stimulate the vagus nerve",duration:8,targetState:n.VENTRAL_VAGAL,steps:["Sit comfortably with your spine straight","Take a deep breath in through your nose",'As you exhale, make a long "Ahhhh" sound',"Feel the vibration in your chest and throat",'Take another breath and try humming "Mmmmm"','Continue with "Ohhhh" sounds','Try "Voooo" sounds, feeling the vibration',"Experiment with different tones and pitches","Notice how the vibrations feel in your body","End with three natural breaths"]},{id:"orienting",name:"Orienting Exercise",description:"Slow environmental scanning to signal safety",duration:6,targetState:n.VENTRAL_VAGAL,steps:["Sit or stand comfortably in your space","Very slowly turn your head to the right","Notice what you see without judgment","Slowly turn your head to the left","Look up toward the ceiling","Look down toward the floor","Return to center and look straight ahead","Name 5 things you can see","Name 4 sounds you can hear","Name 3 things you can physically feel","Take a deep breath and notice how you feel"]},{id:"social_connection",name:"Social Connection Visualization",description:"Imagining safe, supportive relationships",duration:10,targetState:n.VENTRAL_VAGAL,steps:["Close your eyes and breathe naturally","Think of someone who makes you feel safe and accepted","Visualize their face and warm expression","Imagine having a pleasant conversation with them","Feel their genuine interest and care for you","Notice the warmth in your chest and heart area","Imagine sharing a laugh together","Feel the sense of belonging and connection","Expand this feeling to include other supportive people","Rest in this sense of social safety and connection","Slowly open your eyes when ready"]},{id:"cold_water",name:"Cold Water Face Immersion",description:"Brief cold exposure to activate the vagus nerve",duration:5,targetState:n.VENTRAL_VAGAL,steps:["Fill a bowl with cold (not ice) water","Take a few deep breaths to prepare","Immerse your face from temples to chin for 15-30 seconds","Or apply a cold, wet cloth to your face","Breathe normally while the cold is applied","Remove and breathe deeply","Notice the shift in your nervous system","Repeat 2-3 times if comfortable","End with gentle, warm breaths","Notice how your body feels now"]},{id:"breathing_regulation",name:"Vagal Breathing",description:"Specific breathing pattern to activate ventral vagal state",duration:7,targetState:n.VENTRAL_VAGAL,steps:["Sit comfortably with one hand on chest, one on belly","Breathe in slowly through your nose for 4 counts","Hold your breath gently for 4 counts","Exhale slowly through your mouth for 6 counts","Make your exhale longer than your inhale","Continue this 4-4-6 pattern","Focus on making the exhale smooth and controlled","Notice your heart rate slowing","Continue for several more cycles","Return to natural breathing"]}];h.useEffect(()=>{let t;return m&&s&&(t=setInterval(()=>{x(r=>{const a=r+100/(s.duration*60);return a>=100?(u(!1),100):a})},1e3)),()=>clearInterval(t)},[m,s]);const V=t=>{N(t),x(0),u(!0)},T=()=>{u(!m)},k=()=>{u(!1),x(0)},L=()=>{const t={type:"polyvagal_exercise",exercise:s.name,duration:Math.round(c/100*s.duration),startState:w.currentNervousSystemState,endState:l,targetState:s.targetState};A(t),C({currentNervousSystemState:l}),N(null),x(0)},R=()=>{if(!s)return null;const t=Math.floor(c/100*s.steps.length);return s.steps[Math.min(t,s.steps.length-1)]},_=()=>{const t=d[l],r=t.icon;return e.jsxs(p,{className:"mb-6",children:[e.jsx(g,{children:e.jsxs(y,{className:"flex items-center space-x-2",children:[e.jsx(r,{className:`h-5 w-5 ${t.color}`}),e.jsx("span",{children:"Current Nervous System State"})]})}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold ${t.color}`,children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),e.jsx("div",{className:"flex space-x-2",children:Object.entries(n).map(([a,o])=>e.jsx(i,{variant:l===o?"default":"outline",size:"sm",onClick:()=>S(o),children:d[o].name.split(" ")[0]},a))})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.characteristics.map(a=>e.jsx(v,{variant:"outline",children:a},a))})]})]})},I=()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(t=>{const r=d[t.targetState],a=r.icon;return e.jsxs(p,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[e.jsxs(g,{children:[e.jsxs(y,{className:"flex items-center space-x-2",children:[e.jsx(a,{className:`h-5 w-5 ${r.color}`}),e.jsx("span",{children:t.name})]}),e.jsx(f,{children:t.description})]}),e.jsx(j,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(v,{variant:"outline",children:[t.duration," min"]}),e.jsxs(v,{variant:"secondary",className:r.color,children:["â†’ ",r.name]})]}),e.jsxs(i,{onClick:()=>V(t),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Start"]})]})})]},t.id)})}),P=()=>{const t=d[s.targetState],r=t.icon;return e.jsxs(p,{children:[e.jsxs(g,{children:[e.jsxs(y,{className:"flex items-center space-x-2",children:[e.jsx(r,{className:`h-5 w-5 ${t.color}`}),e.jsx("span",{children:s.name})]}),e.jsx(f,{children:s.description})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(c),"% complete"]})]}),e.jsx(H,{value:c,className:"w-full"})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Current guidance:"}),e.jsx("p",{className:"text-sm",children:R()})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(i,{onClick:T,variant:"outline",children:m?e.jsx(G,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})}),e.jsx(i,{onClick:k,variant:"outline",children:e.jsx(z,{className:"h-4 w-4"})}),c>=100&&e.jsx(i,{onClick:L,className:"flex-1",children:"Complete Session"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"How does your nervous system feel now?"}),e.jsx("div",{className:"flex space-x-2 mt-2",children:Object.entries(n).map(([a,o])=>e.jsx(i,{variant:l===o?"default":"outline",size:"sm",onClick:()=>S(o),children:d[o].name.split(" ")[0]},a))})]})]})})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{children:e.jsxs(g,{children:[e.jsx(y,{children:"Polyvagal Theory Exercises"}),e.jsx(f,{children:"Exercises based on Stephen Porges' Polyvagal Theory to help regulate your nervous system and cultivate a sense of safety and social connection."})]})}),_(),s?P():I()]})}export{J as default};
