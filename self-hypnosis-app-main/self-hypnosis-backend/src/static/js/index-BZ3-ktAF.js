import{r as a}from"./ui-vendor-BlhBEYGa.js";import{u as E}from"../assets/index-BKYWQTDL.js";import{d as M}from"./index-P2oMkgOm.js";function T(e,n){return a.useReducer((r,t)=>{const o=n[r][t];return o!=null?o:r},e)}var P=e=>{const{present:n,children:r}=e,t=R(n),o=typeof r=="function"?r({present:t.isPresent}):a.Children.only(r),c=E(t.ref,v(o));return typeof r=="function"||t.isPresent?a.cloneElement(o,{ref:c}):null};P.displayName="Presence";function R(e){const[n,r]=a.useState(),t=a.useRef(null),o=a.useRef(e),c=a.useRef("none"),A=e?"mounted":"unmounted",[N,s]=T(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const i=l(t.current);c.current=N==="mounted"?i:"none"},[N]),M(()=>{const i=t.current,m=o.current;if(m!==e){const u=c.current,d=l(i);e?s("MOUNT"):d==="none"||(i==null?void 0:i.display)==="none"?s("UNMOUNT"):s(m&&u!==d?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,s]),M(()=>{var i;if(n){let m;const p=(i=n.ownerDocument.defaultView)!=null?i:window,u=f=>{const g=l(t.current).includes(CSS.escape(f.animationName));if(f.target===n&&g&&(s("ANIMATION_END"),!o.current)){const O=n.style.animationFillMode;n.style.animationFillMode="forwards",m=p.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=O)})}},d=f=>{f.target===n&&(c.current=l(t.current))};return n.addEventListener("animationstart",d),n.addEventListener("animationcancel",u),n.addEventListener("animationend",u),()=>{p.clearTimeout(m),n.removeEventListener("animationstart",d),n.removeEventListener("animationcancel",u),n.removeEventListener("animationend",u)}}else s("ANIMATION_END")},[n,s]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:a.useCallback(i=>{t.current=i?getComputedStyle(i):null,r(i)},[])}}function l(e){return(e==null?void 0:e.animationName)||"none"}function v(e){var t,o;let n=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}export{P};
