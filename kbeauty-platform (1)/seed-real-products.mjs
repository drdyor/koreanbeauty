import { drizzle } from 'drizzle-orm/mysql2';
import { products, categories, blogPosts } from './drizzle/schema.js';

const db = drizzle(process.env.DATABASE_URL);

async function seed() {
  console.log('ğŸŒ¸ Seeding database with real K-beauty products...');

  // Clear existing data
  await db.delete(products);
  await db.delete(categories);
  await db.delete(blogPosts);

  // Insert categories
  const categoryData = [
    { id: 1, name: 'Cleansers', slug: 'cleansers', description: 'Gentle cleansers for all skin types' },
    { id: 2, name: 'Toners', slug: 'toners', description: 'Hydrating and balancing toners' },
    { id: 3, name: 'Serums', slug: 'serums', description: 'Concentrated treatments for specific concerns' },
    { id: 4, name: 'Moisturizers', slug: 'moisturizers', description: 'Nourishing creams and gels' },
    { id: 5, name: 'Sunscreen', slug: 'sunscreen', description: 'Daily sun protection' },
    { id: 6, name: 'Face Masks', slug: 'face-masks', description: 'Sheet and wash-off masks' },
    { id: 7, name: 'Eye Care', slug: 'eye-care', description: 'Eye creams and serums' },
  ];

  await db.insert(categories).values(categoryData);

  // Insert real products from koreanskincare.com
  const productData = [
    // EQQUALBERRY Brand
    {
      name: 'Aloe PDRN Calming Serum',
      brand: 'EQQUALBERRY',
      price: 23.95,
      originalPrice: null,
      categoryId: 3,
      description: 'A soothing serum with aloe and PDRN (Polydeoxyribonucleotide) that calms irritated skin and promotes skin regeneration. Perfect for sensitive or stressed skin.',
      ingredients: 'Aloe Vera Extract, PDRN, Hyaluronic Acid, Panthenol, Centella Asiatica',
      howToUse: 'After cleansing and toning, apply 2-3 drops to face and neck. Gently pat until fully absorbed.',
      imageUrl: 'https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=500',
      skinConcerns: JSON.stringify(['sensitivity', 'redness', 'irritation']),
      keyIngredients: JSON.stringify(['aloe', 'pdrn', 'hyaluronic-acid']),
      stock: 45,
      rating: 4.8,
      reviewCount: 127,
      isNew: true,
      isBestseller: false,
    },
    {
      name: 'Hyaltoin Flooding Serum',
      brand: 'EQQUALBERRY',
      price: 23.95,
      originalPrice: null,
      categoryId: 3,
      description: 'An intensive hydration serum combining hyaluronic acid and allantoin to flood skin with moisture and improve skin texture.',
      ingredients: 'Hyaluronic Acid, Allantoin, Glycerin, Beta-Glucan, Ceramides',
      howToUse: 'Apply 2-3 drops after toner. Layer with moisturizer for maximum hydration.',
      imageUrl: 'https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=500',
      skinConcerns: JSON.stringify(['dryness', 'dehydration', 'fine-lines']),
      keyIngredients: JSON.stringify(['hyaluronic-acid', 'allantoin']),
      stock: 38,
      rating: 4.9,
      reviewCount: 156,
      isNew: true,
      isBestseller: false,
    },
    {
      name: 'Bakuchiol Plumping Capsule Cream',
      brand: 'EQQUALBERRY',
      price: 24.95,
      originalPrice: null,
      categoryId: 4,
      description: 'A luxurious cream with bakuchiol (natural retinol alternative) that plumps and firms skin without irritation. Encapsulated formula ensures maximum potency.',
      ingredients: 'Bakuchiol, Peptides, Adenosine, Niacinamide, Shea Butter',
      howToUse: 'Apply as the last step of your evening routine. Gently massage into skin until absorbed.',
      imageUrl: 'https://images.unsplash.com/photo-1556228720-195a672e8a03?w=500',
      skinConcerns: JSON.stringify(['aging', 'fine-lines', 'firmness']),
      keyIngredients: JSON.stringify(['bakuchiol', 'peptides', 'niacinamide']),
      stock: 29,
      rating: 4.7,
      reviewCount: 89,
      isNew: true,
      isBestseller: false,
    },
    {
      name: 'Collagen Pore Tight Up Gel Toner Pads',
      brand: 'EQQUALBERRY',
      price: 23.95,
      originalPrice: null,
      categoryId: 2,
      description: 'Convenient toner pads infused with collagen and pore-tightening ingredients. Each pad delivers toning, exfoliating, and pore-refining benefits.',
      ingredients: 'Hydrolyzed Collagen, Witch Hazel, Niacinamide, PHA, Tea Tree Extract',
      howToUse: 'After cleansing, gently swipe pad across face avoiding eye area. No rinsing needed.',
      imageUrl: 'https://images.unsplash.com/photo-1556228852-80c7ca0d6e0e?w=500',
      skinConcerns: JSON.stringify(['large-pores', 'texture', 'oiliness']),
      keyIngredients: JSON.stringify(['collagen', 'niacinamide', 'witch-hazel']),
      stock: 52,
      rating: 4.6,
      reviewCount: 203,
      isNew: true,
      isBestseller: false,
    },
    {
      name: 'Collagen Glow Up Gel Toner Pads',
      brand: 'EQQUALBERRY',
      price: 23.95,
      originalPrice: null,
      categoryId: 2,
      description: 'Brightening toner pads with collagen and vitamin C that boost radiance and improve skin tone. Perfect for dull, tired skin.',
      ingredients: 'Hydrolyzed Collagen, Vitamin C, Niacinamide, Licorice Extract, Hyaluronic Acid',
      howToUse: 'Use morning and evening after cleansing. Gently wipe across face and neck.',
      imageUrl: 'https://images.unsplash.com/photo-1570554886111-e80fcca6a029?w=500',
      skinConcerns: JSON.stringify(['dullness', 'uneven-tone', 'dark-spots']),
      keyIngredients: JSON.stringify(['collagen', 'vitamin-c', 'niacinamide']),
      stock: 41,
      rating: 4.8,
      reviewCount: 178,
      isNew: true,
      isBestseller: false,
    },

    // Beauty of Joseon Brand
    {
      name: 'Relief Sun: Rice + Probiotics SPF50+ PA++++',
      brand: 'Beauty of Joseon',
      price: 14.21,
      originalPrice: 17.90,
      categoryId: 5,
      description: 'A lightweight, creamy sunscreen with rice extract and probiotics that provides high sun protection without white cast. Perfect for daily use.',
      ingredients: 'Rice Extract, Probiotics, Niacinamide, Hyaluronic Acid, Zinc Oxide',
      howToUse: 'Apply generously as the last step of morning skincare. Reapply every 2 hours when exposed to sun.',
      imageUrl: 'https://images.unsplash.com/photo-1556228720-195a672e8a03?w=500',
      skinConcerns: JSON.stringify(['sun-protection', 'brightening', 'hydration']),
      keyIngredients: JSON.stringify(['rice-extract', 'probiotics', 'niacinamide']),
      stock: 87,
      rating: 4.9,
      reviewCount: 419,
      isNew: false,
      isBestseller: true,
    },
    {
      name: 'Revive Eye Serum: Ginseng + Retinal',
      brand: 'Beauty of Joseon',
      price: 15.11,
      originalPrice: 17.95,
      categoryId: 7,
      description: 'A powerful eye serum combining ginseng and retinal to reduce fine lines, dark circles, and puffiness around the delicate eye area.',
      ingredients: 'Ginseng Extract, Retinal, Niacinamide, Peptides, Caffeine',
      howToUse: 'Apply small amount around eye area morning and evening. Gently pat until absorbed.',
      imageUrl: 'https://images.unsplash.com/photo-1612817288484-6f916006741a?w=500',
      skinConcerns: JSON.stringify(['fine-lines', 'dark-circles', 'puffiness']),
      keyIngredients: JSON.stringify(['ginseng', 'retinal', 'peptides']),
      stock: 63,
      rating: 4.8,
      reviewCount: 248,
      isNew: false,
      isBestseller: true,
    },
    {
      name: 'Dynasty Cream',
      brand: 'Beauty of Joseon',
      price: 20.16,
      originalPrice: 23.95,
      categoryId: 4,
      description: 'A rich, nourishing cream inspired by traditional Korean royal skincare. Contains rice bran and ginseng for deep hydration and anti-aging benefits.',
      ingredients: 'Rice Bran Extract, Ginseng, Niacinamide, Squalane, Ceramides',
      howToUse: 'Apply as final step of evening routine. Massage gently into skin.',
      imageUrl: 'https://images.unsplash.com/photo-1620916566398-39f1143ab7be?w=500',
      skinConcerns: JSON.stringify(['dryness', 'aging', 'dullness']),
      keyIngredients: JSON.stringify(['rice-bran', 'ginseng', 'ceramides']),
      stock: 45,
      rating: 4.7,
      reviewCount: 312,
      isNew: false,
      isBestseller: true,
    },

    // Dr.Althea Brand
    {
      name: '345 Relief Cream',
      brand: 'Dr.Althea',
      price: 19.75,
      originalPrice: 23.95,
      categoryId: 4,
      description: 'A soothing cream with 3 types of ceramides, 4 types of hyaluronic acid, and 5 types of cica for ultimate skin barrier repair and relief.',
      ingredients: 'Ceramides (3 types), Hyaluronic Acid (4 types), Centella Asiatica (5 types), Panthenol',
      howToUse: 'Apply to clean skin morning and evening. Perfect for sensitive or compromised skin barriers.',
      imageUrl: 'https://images.unsplash.com/photo-1556228852-80c7ca0d6e0e?w=500',
      skinConcerns: JSON.stringify(['sensitivity', 'barrier-damage', 'irritation']),
      keyIngredients: JSON.stringify(['ceramides', 'hyaluronic-acid', 'centella']),
      stock: 34,
      rating: 4.9,
      reviewCount: 267,
      isNew: false,
      isBestseller: true,
    },

    // Anua Brand
    {
      name: 'Heartleaf Quercetinol Pore Deep Cleansing Foam',
      brand: 'Anua',
      price: 16.34,
      originalPrice: 16.45,
      categoryId: 1,
      description: 'A gentle yet effective foam cleanser with heartleaf extract and quercetinol that deeply cleanses pores without stripping skin.',
      ingredients: 'Heartleaf Extract, Quercetinol, Salicylic Acid, Green Tea Extract, Glycerin',
      howToUse: 'Wet face, lather small amount in hands, massage onto face, rinse thoroughly with lukewarm water.',
      imageUrl: 'https://images.unsplash.com/photo-1556228720-195a672e8a03?w=500',
      skinConcerns: JSON.stringify(['large-pores', 'oiliness', 'blackheads']),
      keyIngredients: JSON.stringify(['heartleaf', 'quercetinol', 'salicylic-acid']),
      stock: 71,
      rating: 4.8,
      reviewCount: 391,
      isNew: false,
      isBestseller: true,
    },

    // Additional popular products
    {
      name: 'Snail Mucin 96% Power Essence',
      brand: 'COSRX',
      price: 18.95,
      originalPrice: null,
      categoryId: 3,
      description: 'A cult-favorite essence with 96% snail secretion filtrate that repairs, hydrates, and improves skin texture and tone.',
      ingredients: 'Snail Secretion Filtrate (96%), Betaine, Panthenol, Arginine',
      howToUse: 'After toning, apply 2-3 drops and gently pat into skin. Follow with moisturizer.',
      imageUrl: 'https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=500',
      skinConcerns: JSON.stringify(['texture', 'scars', 'hydration']),
      keyIngredients: JSON.stringify(['snail-mucin']),
      stock: 94,
      rating: 4.9,
      reviewCount: 1247,
      isNew: false,
      isBestseller: true,
    },
    {
      name: 'Green Tea Fresh Cleansing Foam',
      brand: 'Innisfree',
      price: 12.50,
      originalPrice: null,
      categoryId: 1,
      description: 'A refreshing foam cleanser with Jeju green tea that gently removes impurities while maintaining skin moisture balance.',
      ingredients: 'Green Tea Extract, Glycerin, Salicylic Acid, Citric Acid',
      howToUse: 'Lather with water and massage onto damp face. Rinse thoroughly.',
      imageUrl: 'https://images.unsplash.com/photo-1556228852-80c7ca0d6e0e?w=500',
      skinConcerns: JSON.stringify(['oiliness', 'dullness', 'pores']),
      keyIngredients: JSON.stringify(['green-tea']),
      stock: 68,
      rating: 4.6,
      reviewCount: 523,
      isNew: false,
      isBestseller: false,
    },
    {
      name: 'Propolis Light Ampoule',
      brand: 'COSRX',
      price: 21.95,
      originalPrice: null,
      categoryId: 3,
      description: 'A lightweight ampoule with 83% propolis extract that soothes, brightens, and strengthens skin barrier.',
      ingredients: 'Propolis Extract (83%), Hyaluronic Acid, Panthenol, Niacinamide',
      howToUse: 'Apply 2-3 drops after toner. Pat gently until absorbed.',
      imageUrl: 'https://images.unsplash.com/photo-1570554886111-e80fcca6a029?w=500',
      skinConcerns: JSON.stringify(['dullness', 'sensitivity', 'uneven-tone']),
      keyIngredients: JSON.stringify(['propolis', 'niacinamide']),
      stock: 56,
      rating: 4.8,
      reviewCount: 389,
      isNew: false,
      isBestseller: false,
    },
    {
      name: 'Centella Calming Gel Cream',
      brand: 'iUNIK',
      price: 16.95,
      originalPrice: null,
      categoryId: 4,
      description: 'A lightweight gel cream with 70% centella asiatica that calms irritated skin and provides soothing hydration.',
      ingredients: 'Centella Asiatica Extract (70%), Niacinamide, Adenosine, Hyaluronic Acid',
      howToUse: 'Apply as final step of routine. Perfect for oily or combination skin.',
      imageUrl: 'https://images.unsplash.com/photo-1556228720-195a672e8a03?w=500',
      skinConcerns: JSON.stringify(['sensitivity', 'redness', 'oiliness']),
      keyIngredients: JSON.stringify(['centella', 'niacinamide']),
      stock: 42,
      rating: 4.7,
      reviewCount: 198,
      isNew: false,
      isBestseller: false,
    },
    {
      name: 'Real Fit Velvet Lip Tint',
      brand: 'Romand',
      price: 14.50,
      originalPrice: null,
      categoryId: 4,
      description: 'A velvety lip tint with long-lasting color and comfortable matte finish. Available in multiple shades.',
      ingredients: 'Dimethicone, Cyclopentasiloxane, Titanium Dioxide, Iron Oxides',
      howToUse: 'Apply to lips starting from center and blend outward. Build up for more intensity.',
      imageUrl: 'https://images.unsplash.com/photo-1586495777744-4413f21062fa?w=500',
      skinConcerns: JSON.stringify([]),
      keyIngredients: JSON.stringify([]),
      stock: 83,
      rating: 4.8,
      reviewCount: 672,
      isNew: false,
      isBestseller: false,
    },
    {
      name: 'Birch Juice Moisturizing Sheet Mask',
      brand: 'Cosrx',
      price: 3.50,
      originalPrice: null,
      categoryId: 6,
      description: 'A hydrating sheet mask soaked in birch sap that delivers intense moisture and soothes irritated skin.',
      ingredients: 'Birch Sap, Hyaluronic Acid, Panthenol, Allantoin',
      howToUse: 'Apply to clean face, leave on for 15-20 minutes, remove and pat in remaining essence.',
      imageUrl: 'https://images.unsplash.com/photo-1612817288484-6f916006741a?w=500',
      skinConcerns: JSON.stringify(['dryness', 'sensitivity', 'dehydration']),
      keyIngredients: JSON.stringify(['birch-sap', 'hyaluronic-acid']),
      stock: 156,
      rating: 4.7,
      reviewCount: 845,
      isNew: false,
      isBestseller: false,
    },
  ];

  await db.insert(products).values(productData);

  // Insert blog posts
  const blogData = [
    {
      title: 'The Complete Guide to Korean 10-Step Skincare Routine',
      slug: 'korean-10-step-skincare-routine',
      excerpt: 'Discover the secrets behind the famous Korean skincare routine and learn how to achieve glass skin with these 10 essential steps.',
      content: 'Full blog content here...',
      imageUrl: 'https://images.unsplash.com/photo-1556228720-195a672e8a03?w=800',
      category: 'Skincare Tips',
      publishedAt: new Date('2024-01-15'),
    },
    {
      title: 'Understanding K-Beauty Ingredients: A Beginner\'s Guide',
      slug: 'k-beauty-ingredients-guide',
      excerpt: 'Learn about the most popular and effective ingredients in Korean skincare, from snail mucin to centella asiatica.',
      content: 'Full blog content here...',
      imageUrl: 'https://images.unsplash.com/photo-1608248543803-ba4f8c70ae0b?w=800',
      category: 'Ingredients',
      publishedAt: new Date('2024-02-01'),
    },
    {
      title: 'How to Build Your First K-Beauty Routine',
      slug: 'first-k-beauty-routine',
      excerpt: 'New to K-beauty? Start here with our simple guide to building an effective skincare routine that works for your skin type.',
      content: 'Full blog content here...',
      imageUrl: 'https://images.unsplash.com/photo-1570554886111-e80fcca6a029?w=800',
      category: 'Getting Started',
      publishedAt: new Date('2024-02-20'),
    },
  ];

  await db.insert(blogPosts).values(blogData);

  console.log('âœ… Database seeded successfully with real K-beauty products!');
  process.exit(0);
}

seed().catch((error) => {
  console.error('âŒ Error seeding database:', error);
  process.exit(1);
});
